<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Markdown to PDF Exporter</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .panel {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h2 {
            font-size: 16px;
            color: #333;
            font-weight: 600;
        }

        .panel-tools {
            display: flex;
            gap: 8px;
        }

        .tool-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            padding: 6px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .tool-btn:hover {
            background: #e0e0e0;
        }

        .panel-content {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            border: none;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            resize: none;
            color: #333;
        }

        textarea:focus {
            outline: none;
        }

        .preview {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #fafafa;
        }

        .preview-content {
            line-height: 1.6;
            color: #333;
        }

        .preview-content h1 { font-size: 28px; margin: 25px 0 15px 0; color: #2c3e50; }
        .preview-content h2 { font-size: 22px; margin: 20px 0 12px 0; color: #34495e; }
        .preview-content h3 { font-size: 18px; margin: 16px 0 10px 0; color: #34495e; }
        .preview-content h4, .preview-content h5, .preview-content h6 { margin: 12px 0 8px 0; color: #34495e; }
        .preview-content p { margin: 12px 0; }
        .preview-content ul, .preview-content ol { margin: 12px 0 12px 20px; }
        .preview-content li { margin: 6px 0; }
        .preview-content code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            color: #d63384;
        }
        .preview-content pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 12px 0;
        }
        .preview-content pre code { background: none; padding: 0; color: #333; }
        .preview-content blockquote {
            border-left: 4px solid #667eea;
            padding-left: 15px;
            margin: 12px 0;
            color: #666;
            font-style: italic;
        }
        .preview-content hr { border: none; height: 1px; background: #ddd; margin: 20px 0; }
        .preview-content a { color: #667eea; text-decoration: none; }
        .preview-content a:hover { text-decoration: underline; }
        .preview-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 12px 0;
        }
        .preview-content th, .preview-content td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        .preview-content th {
            background: #f4f4f4;
            font-weight: 600;
        }

        .settings-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .setting-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .setting-group label {
            font-size: 13px;
            font-weight: 600;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .setting-group input,
        .setting-group select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .setting-group input:focus,
        .setting-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: auto;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-small {
            padding: 8px 12px;
            font-size: 12px;
            width: auto;
        }

        .color-picker {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: #333;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }

        .template-btn {
            padding: 10px;
            background: #f0f0f0;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-btn:hover {
            background: #e8e8e8;
        }

        .templates {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 24px;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ú® Enhanced Markdown to PDF Exporter</h1>
        <p>Write, preview, customize, and export markdown documents as beautiful PDFs</p>
    </div>

    <div class="container">
        <!-- Editor Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2>üìù Markdown Editor</h2>
                <div class="panel-tools">
                    <button class="tool-btn" title="Copy to clipboard" onclick="copyToClipboard()">üìã</button>
                    <button class="tool-btn" title="Clear all" onclick="clearInput()">üóëÔ∏è</button>
                </div>
            </div>
            <div class="panel-content">
                <textarea id="markdownInput" placeholder="Enter your markdown here...

# Welcome to Markdown Editor
## Write beautiful documents

This editor supports **bold**, *italic*, and `code`.

- Bullet points
- Work great
  - Even nested ones

[Links](https://example.com) are supported too!

```javascript
// Code blocks with syntax highlighting
const greeting = 'Hello, World!';
```"></textarea>
            </div>
        </div>

        <!-- Preview & Settings Panel -->
        <div class="panel">
            <div style="display: flex; height: 100%; flex-direction: column;">
                <!-- Preview Section -->
                <div style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
                    <div class="panel-header">
                        <h2>üëÅÔ∏è Live Preview</h2>
                    </div>
                    <div class="preview">
                        <div class="preview-content" id="preview"></div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div style="border-top: 1px solid #e0e0e0; background: #f8f9fa; padding: 20px; max-height: 50vh; overflow-y: auto;">
                    <h3 style="font-size: 14px; margin-bottom: 15px; font-weight: 600;">‚öôÔ∏è Export Settings</h3>
                    
                    <div class="settings-panel">
                        <div class="setting-group">
                            <label for="filename">PDF Filename</label>
                            <input type="text" id="filename" placeholder="document" value="document">
                        </div>

                        <div class="setting-group">
                            <label for="author">Author Name</label>
                            <input type="text" id="author" placeholder="Your name (optional)">
                        </div>

                        <div class="setting-group">
                            <label for="theme">Color Theme</label>
                            <div class="color-picker">
                                <div class="color-option active" style="background: #667eea;" onclick="setTheme('#667eea')" title="Default"></div>
                                <div class="color-option" style="background: #f56565;" onclick="setTheme('#f56565')" title="Red"></div>
                                <div class="color-option" style="background: #48bb78;" onclick="setTheme('#48bb78')" title="Green"></div>
                                <div class="color-option" style="background: #ed8936;" onclick="setTheme('#ed8936')" title="Orange"></div>
                                <div class="color-option" style="background: #9f7aea;" onclick="setTheme('#9f7aea')" title="Purple"></div>
                                <div class="color-option" style="background: #38b2ac;" onclick="setTheme('#38b2ac')" title="Teal"></div>
                            </div>
                        </div>

                        <div class="setting-group">
                            <label for="pagesize">Page Size</label>
                            <select id="pagesize">
                                <option value="a4">A4</option>
                                <option value="letter">Letter</option>
                                <option value="a5">A5</option>
                            </select>
                        </div>

                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value" id="wordCount">0</div>
                                <div class="stat-label">Words</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="charCount">0</div>
                                <div class="stat-label">Characters</div>
                            </div>
                        </div>

                        <div class="controls">
                            <button class="btn-primary" onclick="exportPDF()">‚¨áÔ∏è Export to PDF</button>
                            <button class="btn-secondary" onclick="exportMarkdown()">üíæ Download as .md</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Templates Modal -->
    <div id="templatesModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; padding: 20px;">
        <div style="background: white; border-radius: 12px; max-width: 500px; margin: 100px auto; padding: 30px; max-height: 70vh; overflow-y: auto;">
            <h2 style="margin-bottom: 20px;">Choose a Template</h2>
            <div class="templates" id="templatesContainer"></div>
            <button class="btn-secondary" onclick="closeTemplates()" style="margin-top: 20px;">Close</button>
        </div>
    </div>

    <script>
        const markdownInput = document.getElementById('markdownInput');
        const preview = document.getElementById('preview');
        let currentTheme = '#667eea';

        marked.setOptions({
            breaks: true,
            gfm: true
        });

        const templates = {
            'Resume': `# John Doe
**Email:** john@example.com | **Phone:** (555) 123-4567

## Professional Summary
Dedicated professional with 5+ years of experience in software development and project management.

## Experience
### Senior Developer | Tech Company (2020-Present)
- Led team of 5 developers
- Improved performance by 40%
- Managed multiple client projects

### Junior Developer | Startup Inc (2018-2020)
- Developed full-stack web applications
- Fixed 200+ bugs and issues

## Education
**B.S. Computer Science** | University (2018)

## Skills
- JavaScript, Python, React
- Project Management
- Team Leadership`,

            'Meeting Notes': `# Meeting Notes
**Date:** ${new Date().toLocaleDateString()}
**Attendees:** [Names]
**Duration:** 1 hour

## Agenda
1. Q1 Performance Review
2. Upcoming Projects
3. Team Development

## Discussion Points
- Performance metrics exceeded targets by 15%
- Three new projects approved for Q2
- Training budget allocated

## Action Items
- [ ] Finalize Q2 project timeline
- [ ] Schedule one-on-ones
- [ ] Update documentation

## Next Meeting
${new Date(Date.now() + 7*24*60*60*1000).toLocaleDateString()}`,

            'Blog Post': `# How to Master Markdown
*By Your Name*
*Published: ${new Date().toLocaleDateString()}*

## Introduction
Markdown is a lightweight markup language that makes writing easy and readable.

## Getting Started
Markdown uses simple syntax:
- **Bold:** \`**text**\`
- *Italic:* \`*text*\`
- Code: \`\`code\`\`

## Advanced Features
### Lists
Both ordered and unordered lists are simple to create.

### Code Blocks
Perfect for sharing programming examples.

## Conclusion
Start writing in Markdown today and improve your workflow!`,

            'Project Proposal': `# Project Proposal: [Project Name]
**Submitted by:** [Your Name]
**Date:** ${new Date().toLocaleDateString()}

## Executive Summary
A brief overview of the project and its objectives.

## Problem Statement
Define the problem that this project will solve.

## Proposed Solution
Explain how the project addresses the problem.

## Timeline
- **Phase 1:** Research & Planning (Week 1-2)
- **Phase 2:** Development (Week 3-6)
- **Phase 3:** Testing & Deployment (Week 7-8)

## Budget
- Development: \$XX,XXX
- Testing: \$X,XXX
- Total: \$XX,XXX

## Expected Outcomes
- Increased efficiency by 30%
- Cost savings of \$XX,XXX annually
- Improved user satisfaction`
        };

        function updatePreview() {
            const markdown = markdownInput.value;
            const html = marked.parse(markdown);
            preview.innerHTML = html;
            updateStats();
        }

        function updateStats() {
            const text = markdownInput.value;
            const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
            const chars = text.length;
            document.getElementById('wordCount').textContent = words;
            document.getElementById('charCount').textContent = chars;
        }

        function exportPDF() {
            const markdown = markdownInput.value;
            if (!markdown.trim()) {
                alert('Please enter some markdown content');
                return;
            }

            const html = marked.parse(markdown);
            const filename = document.getElementById('filename').value || 'document';
            const author = document.getElementById('author').value;
            
            const element = document.createElement('div');
            element.innerHTML = html;
            element.style.padding = '30px';
            element.style.fontFamily = 'Arial, sans-serif';
            element.style.lineHeight = '1.6';
            element.style.color = '#333';

            const h1s = element.querySelectorAll('h1');
            h1s.forEach(h => {
                h.style.fontSize = '28px';
                h.style.color = currentTheme;
            });

            const h2s = element.querySelectorAll('h2');
            h2s.forEach(h => {
                h.style.fontSize = '22px';
                h.style.color = currentTheme;
            });

            const codes = element.querySelectorAll('code');
            codes.forEach(c => {
                c.style.backgroundColor = '#f4f4f4';
                c.style.padding = '2px 6px';
                c.style.borderRadius = '4px';
                c.style.fontFamily = 'monospace';
            });

            const blockquotes = element.querySelectorAll('blockquote');
            blockquotes.forEach(b => {
                b.style.borderLeft = `4px solid ${currentTheme}`;
                b.style.paddingLeft = '15px';
                b.style.color = '#666';
            });

            const links = element.querySelectorAll('a');
            links.forEach(a => {
                a.style.color = currentTheme;
            });

            const pageSize = document.getElementById('pagesize').value;
            const opt = {
                margin: 15,
                filename: `${filename}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: pageSize, orientation: 'portrait' }
            };

            html2pdf().set(opt).from(element).save();
        }

        function exportMarkdown() {
            const markdown = markdownInput.value;
            if (!markdown.trim()) {
                alert('Please enter some markdown content');
                return;
            }

            const filename = document.getElementById('filename').value || 'document';
            const blob = new Blob([markdown], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${filename}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function clearInput() {
            if (confirm('Clear all content? This cannot be undone.')) {
                markdownInput.value = '';
                updatePreview();
            }
        }

        function copyToClipboard() {
            markdownInput.select();
            document.execCommand('copy');
            alert('Copied to clipboard!');
        }

        function setTheme(color) {
            currentTheme = color;
            document.querySelectorAll('.color-option').forEach(el => {
                el.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        markdownInput.addEventListener('input', updatePreview);
        updatePreview();
    </script>
</body>
</html>
